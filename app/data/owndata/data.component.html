<div class="container">

  <p id="message">{{message}}</p>
  <div class='data' *ngIf="spirometryData.length > 0">
    <br/>
    <p>
      Allow other users to view my data: <a (click)="showGrantConsent()">[click here]</a>
    </p>
    <table class="table table-striped">
      <thead>
      <tr>
        <th>Title</th>
        <th>Added on</th>
        <th>FVC</th>
        <th>FEV 1</th>
        <th></th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let data of spirometryData; let i = index">
        <td>{{data.title}}</td>
        <td>{{data.dateTime}}</td>
        <td>{{data.fvc}}</td>
        <td>{{data.fev1}}</td>
        <td><a id='deleteItem-{{i}}' (click)="deleteDataItem(data.title)">delete</a></td>
      </tr>
      </tbody>
    </table>
  </div>
  <div class="additem">
    <br/>
    <a id="showAddItem" (click)="showAddItem()" *ngIf="!isAddItemShown">Add new data item</a>
    <br/>
    <a id="hideAddItem" (click)="showAddItem()" *ngIf="isAddItemShown">Hide add new data item</a>
    <br/>
    <div *ngIf="isAddItemShown">
      <form (ngSubmit)="addDataItem()">
        <div class="form-group">
          <label for="title">Title</label>
          <input type="text" class="form-control" id="title" required [(ngModel)]="dataItem.title" name="title">
        </div>
        <div class="form-group">
          <label for="fvc">FVC</label>
          <input type="text" class="form-control" id="fvc" required [(ngModel)]="dataItem.fvc" name="fvc">
        </div>
        <div class="form-group">
          <label for="fev1">FEV 1</label>
          <input type="text" class="form-control" id="fev1" required [(ngModel)]="dataItem.fev1" name="fev1">
        </div>
        <button type="submit" id="submit-button" class="btn btn-default">Submit</button>
      </form>
    </div>
  </div>
</div>
